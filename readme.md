# Repro: yarnpkg/yarn issue 3137

This reproduces ["yarn upgrade package will upgrade unrelated packages in the lockfile"](https://github.com/yarnpkg/yarn/issues/3137) with local `file:` dependencies.

## Requirements

Unix cat, sed and tee

## Steps

1. `git clone https://github.com/cristianl/repro-yarn-3137 && cd repro-yarn-3137 && yarn`
2. `yarn run bump-deps`
3. `yarn upgrade repro-yarn-3137-dep1`
4. `cat yarn.lock`

It should be

```
# THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.
# yarn lockfile v1


"repro-yarn-3137-dep1@file:dep-1":
  version "0.0.1-TIMESTAMP"

"repro-yarn-3137-dep2@file:dep-2":
  version "0.0.1-default"

```

As of v1.21.1 it generates

```
# THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.
# yarn lockfile v1


"repro-yarn-3137-dep1@file:dep-1":
  version "0.0.1-TIMESTAMP"

"repro-yarn-3137-dep2@file:dep-2":
  version "0.0.1-TIMESTAMP"

```
